<div id="page">

<div id="main" class="aui-page-panel">

<div id="main-header">

<div id="breadcrumb-section">

1.  [ProgInz TG08.3](index.html)
2.  [ProgInz TG08.3 Home](ProgInz-TG08.3-Home_66036.html)
3.  [Backend](Backend_2097168.html)
4.  [Backend Guide](Backend-Guide_5111835.html)

</div>

# <span id="title-text"> ProgInz TG08.3 : DbContext </span>

</div>

<div id="content" class="view">

<div class="page-metadata">

Created by <span class="author"> Jakov Lovaković</span>, last modified
on Oct 26, 2024

</div>

<div id="main-content" class="wiki-content group">

`DbContext` je jedna od najvažnijih klasa u cijelome backend dijelu
projekta. `DbContext` koristi se za više stvari, primarno za povezivanje
baze i za dohvat podataka ili uređivanje podataka iz baze.

Ova klasa implementira se pomoću klase `DataContext` koja direktno
nasljeđuje `DbContext`. Klasa `DataContext` može se pronaći u
direktoriju ,,Modeli”, te je jedina klasa u tom direktoriju koja ne
pripada entitetima.

Klasa `DataContext`:

<div class="code panel pdl" style="border-width: 1px;">

<div class="codeContent panelContent pdl">

``` syntaxhighlighter-pre
public class DataContext : DbContext
{
    public DataContext(DbContextOptions options) : base(options) { }

    public DbSet<User>? Users { get; set; }
    public DbSet<Student>? Students { get; set; }
    public DbSet<Educator>? Educators { get; set; }
    public DbSet<Administrator>? Administrators { get; set; }
    public DbSet<Reviewer>? Reviewers { get; set; }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.ApplyConfiguration(new StudentConfiguration());
        modelBuilder.ApplyConfiguration(new UserConfiguration());
        modelBuilder.ApplyConfiguration(new EducatorConfiguration());
        modelBuilder.ApplyConfiguration(new AdministratorConfiguration());
        modelBuilder.ApplyConfiguration(new ReviewerConfiguration());

        base.OnModelCreating(modelBuilder);
    }
}
```

</div>

</div>

Prvo imamo konstruktor
`public DataContext(DbContextOptions options) : base(options) { }` koji
call base konstruktor klase `DbContext`.

Nakon toga imamo `DbSet<T> `propertyje:

<div class="code panel pdl" style="border-width: 1px;">

<div class="codeContent panelContent pdl">

``` syntaxhighlighter-pre
public DbSet<User>? Users { get; set; }
public DbSet<Student>? Students { get; set; }
public DbSet<Educator>? Educators { get; set; }
public DbSet<Administrator>? Administrators { get; set; }
public DbSet<Reviewer>? Reviewers { get; set; }
```

</div>

</div>

Za svaku tablicu koju kreiramo preko klasa entiteta u direktoriju
,,Models” moramo imati jedan `DbSet<T>` oblika iz gornjeg isječka.

Metoda:

<div class="code panel pdl" style="border-width: 1px;">

<div class="codeContent panelContent pdl">

``` syntaxhighlighter-pre
protected override void OnModelCreating(ModelBuilder modelBuilder)
```

</div>

</div>

Služi za primjenjivanje konfiguracije koje smo spominjali u <a
href="https://gumenepatkice.atlassian.net/wiki/spaces/PT/pages/5373968/Konfiguracija+entiteta?atl_f=content-tree"
rel="nofollow">konfiguraciji entiteta</a>.

</div>

</div>

</div>

<div id="footer" role="contentinfo">

<div class="section footer-body">

Document generated by Confluence on Oct 27, 2024 18:23

<div id="footer-logo">

[Atlassian](http://www.atlassian.com/)

</div>

</div>

</div>

</div>
